<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Фильтр дат</title>

    <!-- Подключаем Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Подключаем стили и скрипты для Bootstrap Datepicker -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <style>
        .row {
            margin-bottom: 20px;
        }

        .invisible-label {
            display: none;
        }
    </style>
</head>

<body>
    <h3>Журнал климатических условий</h3>
    <form method="POST" action="/production/climat_values/sorted">
        <div class="container mt-5">
            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="date-from">С даты:</label>
                        <input type="text" class="form-control" name="date_from" id="date-from"
                            placeholder="Выберите дату">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="date-to">По дату:</label>
                        <input type="text" class="form-control" name="date_to" id="date-to" placeholder="Выберите дату">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="place">Участок</label>
                        <select name="place" class="form-control">
                            <option value="none" selected disabled>Выберите участок</option>
                            {% for place in places %}
                            <option value="{{place[0]}}">{{place[0]}}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                    <button class="btn btn-success btn-lg" type="submit">
                        Обновить
                    </button>
                </div>
            </div>
        </div>
    </form>

    <div class="container-fluid mt-5">
        <table class="table table-striped table-bordered table-responsive">
            <thead>
                <tr>
                    <th>Дата</th>
                    <th>Время</th>
                    <th>Температура</th>
                    <th>Влажность</th>
                    <th>Участок</th>
                </tr>
            </thead>
            <tbody style="text-align: center;">
                {% for form in forms %}
                <tr>
                    <td>{{ form.day }}</td>
                    <td>{{ form.time }}</td>
                    <td>{{ form.temperature[:5] }}</td>
                    <td>{{ form.humidity[:5] }}</td>
                    <td>{{ form.place }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <script>
        $(document).ready(function () {
            // Инициализация Datepicker для поля "С"
            $('#date-from').datepicker({
                format: 'dd.mm.yyyy',
                language: 'ru',
                todayHighlight: true
            }).on('changeDate', function (e) {
                $(this).datepicker('hide');
            });

            // Инициализация Datepicker для поля "По"
            $('#date-to').datepicker({
                format: 'dd.mm.yyyy',
                language: 'ru',
                todayHighlight: true
            }).on('changeDate', function (e) {
                $(this).datepicker('hide');
            });
        });
    </script>

</body>

</html>